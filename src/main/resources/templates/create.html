<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <link rel="stylesheet" href="/css/create.css">
  <link rel="stylesheet" th:href="@{/webjars/bootstrap/5.3.0/css/bootstrap.min.css}" />
  <script th:src="@{/webjars/bootstrap/5.3.0/js/bootstrap.bundle.min.js}"></script>

  <title>Create AEM Project</title>
</head>
<body>
<h2>Enter AEM Project Details</h2>

<form action="/save" method="post" th:object="${aemProjectModel}">
  <label>Project Name:</label>
  <input type="text" th:field="*{projectName}" required/>
  <label>AEM Version:</label>
  <select th:field="*{version}" required>
    <option value="">-- Select AEM Version --</option>
    <option value="6.5.0">6.5.0</option>
    <option value="6.5.5">6.5.5</option>
    <option value="6.5.10">6.5.10</option>
    <option value="6.5.13">6.5.13</option>
    <option value="6.5.15">6.5.15</option>
    <option value="6.5.17">6.5.17</option>
    <option value="6.5.18">6.5.18</option>
    <option value="2023.2.12300.20230214T112441Z-230100">2023.2.12300.20230214T112441Z-230100</option>
  </select>
  <label>Package Name (groupId):</label>
  <input type="text" th:field="*{packageName}" required/>
  <h4>Select Components:</h4>
  <div>
    <ul>
      <li th:each="component : ${componentList}">
        <!-- <input type="checkbox" name="selectedComponents" th:value="${component}" />-->
        <input type="checkbox" th:field="*{selectedComponents}" th:value="${component}" />
        <span th:text="${component}"></span>
      </li>
    </ul>
  </div>

  <!-- Spinner overlay -->
  <div id="loadingOverlay" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(255,255,255,0.8); z-index:1000; align-items:center; justify-content:center;">
    <div class="spinner-border text-primary" role="status" style="width: 4rem; height: 4rem;">
      <span class="visually-hidden">Creating...</span>
    </div>
  </div>

  <h1 th:text="${aemProjectModel.projectName}"></h1>
  <h2 th:text="${aemProjectModel.version}"></h2>

  <button type="submit">Create Project</button>
</form>


<script>
  document.querySelector("form").addEventListener("submit", function () {
    document.getElementById("loadingOverlay").style.display = "flex";
  });
</script>
</body>
</html>
